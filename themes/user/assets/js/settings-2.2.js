webpackJsonp([2],Array(28).concat([function(e,t,n){function i(e){return n(r(e))}function r(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./error500":29,"./error500.js":29,"./global":10,"./global.js":10,"./header":30,"./header.es6":30,"./notification":31,"./notification.js":31,"./pageNotFound":41,"./pageNotFound.js":41,"./settings/account":42,"./settings/account.js":42,"./settings/address":43,"./settings/address.js":43,"./settings/address/add":59,"./settings/address/add.js":59,"./settings/address/delete":75,"./settings/address/delete.js":75,"./settings/address/edit":76,"./settings/address/edit.js":76,"./settings/address/undo":77,"./settings/address/undo.js":77,"./settings/closeAccount":79,"./settings/closeAccount.js":79,"./settings/customerServicePin":82,"./settings/customerServicePin.js":82,"./settings/devices":84,"./settings/devices.js":84,"./settings/devices/edit":87,"./settings/devices/edit.js":87,"./settings/email":49,"./settings/email.js":49,"./settings/email/add":88,"./settings/email/add.js":88,"./settings/email/delete":91,"./settings/email/delete.js":91,"./settings/email/edit":92,"./settings/email/edit.js":92,"./settings/email/validate":95,"./settings/email/validate.js":95,"./settings/emailSidePanel":97,"./settings/emailSidePanel.js":97,"./settings/inc/navView":62,"./settings/inc/navView.js":62,"./settings/inc/profileView":63,"./settings/inc/profileView.js":63,"./settings/index":61,"./settings/index.js":61,"./settings/languageTimezone":55,"./settings/languageTimezone.js":55,"./settings/mobilePin":101,"./settings/mobilePin.js":101,"./settings/name/edit":103,"./settings/name/edit.js":103,"./settings/notifications":104,"./settings/notifications.js":104,"./settings/notifications/eStatement":106,"./settings/notifications/eStatement.js":106,"./settings/notifications/emailFormat":98,"./settings/notifications/emailFormat.js":98,"./settings/notifications/paperStatement":107,"./settings/notifications/paperStatement.js":107,"./settings/password":108,"./settings/password.js":108,"./settings/phone":52,"./settings/phone.js":52,"./settings/phone/add":110,"./settings/phone/add.js":110,"./settings/phone/delete":112,"./settings/phone/delete.js":112,"./settings/phone/edit":113,"./settings/phone/edit.js":113,"./settings/phone/validate":114,"./settings/phone/validate.js":114,"./settings/phoneSidePanel":105,"./settings/phoneSidePanel.js":105,"./settings/photo/edit":115,"./settings/photo/edit.js":115,"./settings/security":116,"./settings/security.js":116,"./settings/securityQuestions/edit":118,"./settings/securityQuestions/edit.js":118,"./settings/taxid/edit":120,"./settings/taxid/edit.js":120,"./settings/travelPlan/add":122,"./settings/travelPlan/add.js":122,"./settings/travelPlan/delete":123,"./settings/travelPlan/delete.js":123,"./settings/travelPlan/edit":124,"./settings/travelPlan/edit.js":124,"./settings/wallet":125,"./settings/wallet.js":125};i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=28},function(e,t,n){var i,r;i=[n(13)],r=function(e){"use strict";var t=e.extend({el:"section.error"});return t}.apply(t,i),!(void 0!==r&&(e.exports=r))},,,,,,,,,,,,function(e,t,n){var i,r;i=[n(13)],r=function(e){"use strict";var t=e.extend({el:"section.error",cursor:!1,screenWidth:document.documentElement.clientWidth,screenHeight:document.documentElement.clientHeight,initialize:function(){("transform"in document.body.style||"webkitTransform"in document.body.style)&&(window.addEventListener("deviceorientation",this.getRotation.bind(this),!1),document.addEventListener("mousemove",this.getMousePosition.bind(this),!1))},getMousePosition:function(e){var t=(e.x-this.screenWidth/2)/this.screenWidth*90,n=(e.y-this.screenHeight/2)/this.screenHeight*90;this.cursor=!0,this.rotationHandler(t,n)},getRotation:function(e){if(!this.cursor){var t=e.gamma,n=e.beta;this.rotationHandler(t,n)}},rotationHandler:function(e,t){var n,i=t,r=e,o=[document.querySelector(".background img"),document.querySelector(".balloon img"),document.querySelector(".frisbee img")],s=[.4,.55,.34];for((90===window.orientation||-90===window.orientation)&&(i=e,r=t),n=0;n<o.length;n++)this.transform3d(o[n],i,r,s[n])},transform3d:function(e,t,n,i){e.style.webkitTransform="rotate3d(1,0,0, "+t*i+"deg) rotate3d(0,1,0, "+n*i+"deg) rotate3d(0,0,1, 0deg)",e.style.transform="rotate3d(1,0,0, "+t*i+"deg) rotate3d(0,1,0, "+n*i+"deg) rotate3d(0,0,1, 0deg) rotate3d(0,0,1, 0deg)"}});return t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(6),n(8),n(13),n(43),n(49),n(52),n(55)],r=function(e,t,n,i,r,o,s,a){"use strict";var l=i.extend({el:".stage .account",initialize:function(){this.addressView=new r,this.emailView=new o,this.phoneView=new s,this.languageTimezoneView=new a}});return l}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(14),n(13),n(44),n(46)],r=function(e,t,n,i,r,o,s){"use strict";var a=r.extend({el:".stage .account ul.addresses",events:{"click .undo":"showSpinner"},initialize:function(){this.initModels(),this.formView=new s({el:this.el})},initModels:function(){o.add(this.$el.data("collection")),this.listenTo(o,"add",this.renderAddresses),this.listenTo(o,"remove",this.renderUndoAddress),this.listenTo(o,"reset",this.renderAddresses),this.listenTo(o,"error",this.renderError),this.listenTo(o,"request",this.showLoading)},renderUndoAddress:function(t){this.hideLoading(),this.$(".alertMsg").remove(),e("#"+t.get("id")).addClass("undo")},renderAddresses:function(t){i.viewRenderer.render("settings/inc/addresses",{addresses:o.toJSON(),newAddress:this.$el.data("newaddress")}).done(e.proxy(function(n){this.$(".alertMsg").remove(),this.$el.html(n),e("#"+t.get("id")).addClass("new"),this.hideLoading()},this))},renderError:function(e,t,n){this.hideLoading(),this.formView.showError(n)},showSpinner:function(e){this.showLoading()}});return a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6),n(8),n(45)],r=function(e,t,n){"use strict";var i=e.Collection.extend({url:function(){return e.history.options.root+"settings/address"},model:n,primaryState:"",initialize:function(){this.trigger("reset")},parse:function(e){return e}});return new i}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/address"},defaults:{isDefault:!1},parse:function(e){var t=e.data||{};return t.line1=this.get("street1")||this.get("line1"),t.line2=this.get("street2")||this.get("line2"),t.postal_code=this.get("postalCode")||this.get("postal_code"),t.postcode=t.postal_code,t}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(13),n(6),n(8),n(47),n(48)],r=function(e,t,n,i,r,o){"use strict";var s=t.extend({timer:null,customRule:null,next:null,submitBtn:null,checkInput:null,preValue:null,timeouts:[],events:{'change select[required="required"]:visible':"validating",'focus input[required="required"]:visible':"startValidating",'focusout input[required="required"]:visible':"stopValidating","click .validateBeforeSubmit":"validateBeforeSubmit"},initialize:function(e){this.next=e.next,this.alertMsg=new r,this.customRule=e.customRule,this.checkInput=e.checkInput,this.clearInput=new o({el:this.$el})},validating:function(t){var i=this.validateFields(this.$('input[required="required"]:visible'),this.$('select[required="required"]:visible'),t),r=e(this.checkInput);this.next&&this.next(i),this.checkInput&&this.preValue!==r.val()&&(this.preValue=r.val(),r.parent().removeClass("hasError"),this.validateFields(this.checkInput)&&n.trigger("inputValid"))},validateBeforeSubmit:function(t){var n=this.$("textarea[required]:visible, input[required]:visible"),i=this.$("select[required]:visible"),r=this.validateFields(n,i);return r?!0:(t&&(t.preventDefault(),t.stopPropagation()),setTimeout(e.proxy(function(){this.validateFields(n,i,!0,!0),this.trackErrors(n,i)},this),100),!1)},trackErrors:function(t,i){var r,o=t.add(i);o.each(e.proxy(function(t,i){r=e(i).parent(".hasError"),r&&r.length>0&&n.trigger("trackError",{message:e(i).siblings(".help-error").text(),fieldId:i.id})},this))},validateTimer:function(){this.validating(),this.timeouts.push(setTimeout(e.proxy(function(){this.validateTimer()},this),300))},startValidating:function(){this.validateTimer()},stopValidating:function(){var t,n=e(this.checkInput).parent();for(this.trimInput(),setTimeout(e.proxy(function(){this.validating(!0)},this),50),n.hasClass("hasError")&&setTimeout(function(){n.addClass("hasError")},0),t=0;t<this.timeouts.length;t++)clearTimeout(this.timeouts[t])},validateFields:function(t,n,r,o){var s=!0;return n&&n.each(function(){e(this).parent().parent().removeClass("hasError"),"-1"===e(this).val()&&(s=!1,o&&e(this).parent().parent().addClass("hasError"))}),t.each(i.bind(function(t,n){var i,a=e(n),l=a.parent(),c=l.find(".help-error");!a.val()||a.is(":checkbox")&&!a.attr("checked")?(s=!1,l.removeClass("hasError"),o&&this.initInputErrorState(l)):l.hasClass("hasError")?s=!1:(i=e.trim(a.val()),this.checkInputValidation(a,i)||(s=!1,o||r&&""!==i&&this.initInputErrorState(l,c)),s&&this.removeInputErrorState(l,c))},this)),s&&this.customRule&&(s=this.customRule(s)),s},checkInputValidation:function(e,t){return this.checkSkipValidation(e)?!0:this.checkInputPattern(e,t)&&this.checkInputDataMin(e,t)&&this.checkInputMin(e,t)&&this.checkInputMax(e,t)&&this.checkInputMaxLength(e,t)?!0:!1},checkSkipValidation:function(e){return e.data("skip-validate")===!0},initInputErrorState:function(e,t){e.addClass("hasError"),t&&t.addClass("open")},removeInputErrorState:function(e,t){e.removeClass("hasError"),t.removeClass("open")},checkInputPattern:function(e,t){if(e.attr("pattern")){var n=new RegExp("^"+e.attr("pattern")+"$");if(!n.test(t))return!1}return!0},checkInputDataMin:function(e,t){return e.data("min")&&t.length<e.data("min")?!1:!0},getRegExp:function(e,t){var n=t||e.data("decimal-separator")||".",i={decimalSeparator:n,regexPattern:new RegExp("[^0-9\\"+n+"]","g")};return i},getRawValue:function(e,t){return parseFloat(e.replace(t.regexPattern,"").replace(t.decimalSeparator,"."))},checkInputMin:function(e,t,n){if(e.attr("min")){var i=this.getRegExp(e,n),r=this.getRawValue(t,i),o=this.getRawValue(e.attr("min"),i);if(parseFloat(r)<parseFloat(o))return!1}return!0},checkInputMax:function(e,t,n){if(e.attr("max")){var i=this.getRegExp(e,n),r=this.getRawValue(t,i),o=this.getRawValue(e.attr("max"),i);if(r>o)return!1}return!0},checkInputMaxLength:function(e,t){return e.attr("maxlength")&&t.length>e.attr("maxlength")?!1:!0},trimInput:function(){var t=this.$("input:visible");t.each(function(){var t=e(this);t.val(e.trim(t.val()))})},showError:function(e){this.$(".alertMsg").remove(),this.$el.prepend(this.alertMsg.setMessage(e).el)}});return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(6),n(13)],r=function(e,t,n){"use strict";var i=n.extend({className:"alertMsg",template:"widgets/alertMsg",initialize:function(e){this.model=new t.Model({message:e}),this.listenTo(this.model,"change:message",this.render),this.render()},setMessage:function(e){return this.model.set("message",e),this}});return i}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(13)],r=function(e,t){"use strict";return t.extend({events:{"keyup .textInput input":"showClearButton","change .textInput input":"showClearButton","focus .textInput input":"showClearButton","blur .textInput input":"hideClearButton","mousedown .clearInput":"clearInput","touchstart .clearInput":"clearInput"},initialize:function(){var t=document.createElement("input"),n=window.getComputedStyle&&window.getComputedStyle(t,":-ms-clear").content?!0:!1;(!e("body").data("iswireless")||n)&&(this.events={})},showClearButton:function(t){var n=e(t.currentTarget);n.val()&&this.$('.clearInput[data-clear="'+n.attr("id")+'"]').removeClass("hide"),n.parent().hasClass("hasError")&&this.$(".clearInput").addClass("hasError"),8!==t.keyCode||n.val()||this.hideClearButton(t)},hideClearButton:function(e){this.$('.clearInput[data-clear="'+e.currentTarget.id+'"]').addClass("hide").removeClass("hasError")},clearInput:function(t){var n=e("#"+e(t.currentTarget).data("clear"));n.val(""),this.hideClearButton(t),setTimeout(function(){n.focus()},10)}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(14),n(13),n(50),n(46)],r=function(e,t,n,i,r,o,s){"use strict";var a=r.extend({el:".stage .account ul.emails",events:{},initialize:function(){this.initModels(),this.formView=new s({el:this.el})},initModels:function(){o.add(this.$el.data("collection")),this.listenTo(o,"add",this.renderEmails),this.listenTo(o,"remove",this.renderEmails),this.listenTo(o,"reset",this.renderEmails),this.listenTo(o,"error",this.renderError),this.listenTo(o,"request",this.showLoading)},renderEmails:function(t){i.viewRenderer.render("settings/inc/emails",{emails:o.toJSON()}).done(e.proxy(function(n){this.$(".alertMsg").remove(),this.$el.html(n),e("#"+t.get("id")).addClass("new"),this.hideLoading()},this))},renderError:function(e,t,n){this.hideLoading(),this.formView.showError(n)}});return a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6),n(51)],r=function(e,t){"use strict";var n=e.Collection.extend({url:function(){return e.history.options.root+"settings"},model:t,parse:function(e){return e}});return new n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/email"},defaults:{isDefault:!1},parse:function(e){return e.data}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(14),n(13),n(53),n(46)],r=function(e,t,n,i,r,o,s){"use strict";var a=r.extend({el:".stage .account ul.phones",events:{},initialize:function(){this.initModels(),this.formView=new s({el:this.el})},initModels:function(){o.add(this.$el.data("collection")),this.listenTo(o,"add",this.renderPhones),this.listenTo(o,"remove",this.renderPhones),this.listenTo(o,"reset",this.renderPhones),this.listenTo(o,"error",this.renderError),this.listenTo(o,"request",this.showLoading)},renderError:function(e,t,n){this.hideLoading(),this.formView.showError(n)},renderPhones:function(t){var n=e(".settings").data("features");o.invoke("set",{features:{confirmMobile:n.confirmMobile}}),i.viewRenderer.render("settings/inc/phones",{phones:o.toJSON()}).done(e.proxy(function(n){this.$(".alertMsg").remove(),this.$el.html(n),e("#"+t.get("id")).addClass("new"),this.hideLoading()},this))}});return a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6),n(54)],r=function(e,t){"use strict";var n=e.Collection.extend({url:function(){return e.history.options.root+"settings"},model:t,parse:function(e){return e},setPrimaryFalse:function(e){this.each(function(t){t.get("type")===e&&t.set({primary:!1})})}});return new n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/phone"},defaults:{isDefault:!1},parse:function(e){return e.data},validate:function(e){var t=/(^[ \+\.\,\)\(\d\-]{8,23}$)/;return e.phoneNumber.match(t)?void 0:(this.trigger("error"),this.get("error"))}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(6),n(8),n(13),n(56),n(57),n(46),n(58)],r=function(e,t,n,i,r,o,s){"use strict";var a=i.extend({el:".stage .account .options",events:{"change #language":"changeLanguage","change #timezone":"changeTimezone","click .language":"showLanguageDropdown","click .timezone":"showTimezoneDropdown"},initialize:function(){this.$language=this.$(".language"),this.$languageDropdown=this.$(".languageDropdown"),this.$languageLabel=this.$(".languageLabel"),this.$timezone=this.$(".timezone"),this.$timezoneDropdown=this.$(".timezoneDropdown"),this.$timezoneLabel=this.$(".timezoneLabel"),this.initWidgets(),this.initModels()},initWidgets:function(){this.$(".selectDropdown").nativeDropdown(),this.formView=new s({el:"form[name=updateLanguage]"})},initModels:function(){this.languages=this.$(".languageDropdown").data("collection"),this.timezones=this.$(".timezoneDropdown").data("collection");var e=n.find(this.languages,function(e){return e.is_primary}),t=n.find(this.timezones,function(e){return e.is_primary});this.languageModel=new r(e),this.listenTo(this.languageModel,"sync",this.languageUpdate),this.listenTo(this.languageModel,"error",this.languageError),this.timezoneModel=new o(t),this.listenTo(this.timezoneModel,"sync",this.timezoneUpdate)},changeLanguage:function(){var e=this.$("#language").find(":selected"),t=e.data("index"),n=this.languages[t];this.languageModel.get("language_code")!==n.language_code&&(this.$language.removeClass("hide"),this.$languageDropdown.addClass("hide"),n.is_primary=!0,this.languageModel.set(n),this.languageModel.set("error",this.$(".languageDropdown-copy").text()),this.languageModel.save())},changeTimezone:function(){var e=this.$("#timezone").find(":selected"),t=e.data("index"),n=this.timezones[t];this.timezoneModel.get("timezone")!==n.timezone&&(this.$timezone.removeClass("hide"),this.$timezoneDropdown.addClass("hide"),n.is_primary=!0,this.timezoneModel.set(n),this.timezoneModel.save())},languageUpdate:function(e){this.$languageLabel.text(e.get("nativeName")),"rtl"===e.get("directionality")?(this.$languageLabel.removeClass("ltr").addClass("rtl"),this.$languageDropdown.removeClass("ltr").addClass("rtl")):(this.$languageLabel.removeClass("rtl").addClass("ltr"),this.$languageDropdown.removeClass("rtl").addClass("ltr")),t.history.navigate("/settings"),this.languageModel.trigger("error")},languageError:function(e,t,n){n||(n=this.$(".languageDropdown-copy").text()),this.formView.showError(n)},timezoneUpdate:function(e){this.$timezoneLabel.text(e.get("formattedTimezone")),t.history.navigate("/settings")},showLanguageDropdown:function(e){e.preventDefault(),this.$language.addClass("hide"),this.$languageDropdown.removeClass("hide")},showTimezoneDropdown:function(e){e.preventDefault(),this.$timezone.addClass("hide"),this.$timezoneDropdown.removeClass("hide")}});return a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/language"},idAttribute:"language_code"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/timezone"},parse:function(e){return e.data}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1)],r=function(e){e.fn.nativeDropdown=function(t){var n={replacedClass:"replaced",customSelectClass:"custom-select",activeClass:"active",wrapperElement:'<div class="custom-select-container" />'};t&&e.extend(n,t),this.each(function(){var t=e(this),i=t.find("select"),r=e('<div class="'+n.customSelectClass+'" aria-hidden="true">'+e("option:selected",this).text()+"</div>");t.append(r);var o=function(){var t=e("option:selected",this),n=t.attr("data-abbreviation")?t.attr("data-abbreviation"):t.text();r.text(n)};i.bind("change keyup",o),i.bind("mouseenter focus",function(){t.addClass("hovered")}),i.bind("mouseleave blur",function(){t.removeClass("hovered")})})}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(26),n(46),n(45),n(44),n(60),n(68),n(69),n(71),n(58),n(72),n(73)],r=function(e,t,n,i,r,o,s,a,l,c){"use strict";var u=i.extend({el:"#overpanel",template:"settings/address/add",events:{"submit form[name=addAddress]":"submitAddAddress"},initialize:e.noop,initWidgets:function(){this.$(".textInput").lap().textField(),this.$(".ppCheckbox").checkbox(),this.$(".selectDropdown").nativeDropdown(),this.formView=new o({el:"form[name=addAddress]"})},afterRoute:function(){r.setContent(this)},afterRender:function(){this.initWidgets()},initModels:function(){this.model=new s,this.listenToOnce(this.model,"error",this.submitError),this.listenToOnce(this.model,"sync",this.onAddressUpdate)},submitAddAddress:function(e){e.preventDefault();var t=n.Syphon.serialize(this);l.setItem("savedForm",t),this.initModels(),this.model.set(t),this.model.save(),this.toggleLoading(!0)},submitError:function(e,t,n){this.removeSavedForm(),this.toggleLoading(!1),this.formView.showError(n)},onAddressUpdate:function(e){this.removeSavedForm(),e.get("primary")&&(e.set("billing",!0),a.invoke("set",{primary:!1,billing:!1})),a.add(e),this.toggleLoading(!1),r.hideOverpanel()},serialize:function(){var t,n=l.getItem("savedForm");return this.removeSavedForm(),n&&(n.addressLine1={id:"street1",value:n.street1},n.addressLine2={id:"street2",value:n.street2},n.city={id:"city",value:n.city},n.state={id:"stateOrProvince",value:n.stateOrProvince},n.zipcode={id:"postalCode",value:n.postalCode},n.countryCode=n.country),t={newAddress:n||e("ul.addresses").data("newaddress")},c.isSubPage("address")&&(t.lastUrl="settings/address"),t}});return u}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(){if(!o){window.hasOwnProperty("sessionStorage")&&(o=!0);try{s.setItem("test","test"),s.removeItem("test"),o=!0}catch(e){o=!1}}return o}function t(t){var n=null;if(e())try{n=s.getItem(t),n=JSON.parse(n)}catch(i){n=null}return n}function n(t,n){var i=null;if(e()){if(null===n||void 0===t)s.removeItem(t);else try{s.setItem(t,JSON.stringify(n))}catch(r){o=!1}i=n}return i}function i(e){try{s.removeItem(e)}catch(t){o=!1}return null}function r(){s.clear()}var o,s=window.sessionStorage;return{getItem:t,setItem:n,removeItem:i,clear:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(13),n(6),n(8),n(62),n(63),n(47),n(65),n(42),n(26),n(60)],r=function(e,t,n,i,r,o,s,a,l,c,u){"use strict";var d=t.extend({el:".settings",events:{"click li":"onItemClick","click a":"onLinkClick"},initialize:function(){this.listenTo(n,"overpanel:close",this.focusTrigger),this.accountView=new l},afterRoute:function(t){var i;setTimeout(function(){window.scrollTo(0,0)},0),n.trigger("nav:change",t),this.profileView=this.profileView||new o,this.accountView=this.accountView||new l,this.alertMsg=this.alertMsg||new s,this.profilePhotoView=this.profilePhotoView||new a({uploadPhotoUrl:"/myaccount/settings/photo"}),this.$panels=this.$panels||e(".settings .panel"),this.$(".alertMsg").remove(),c.isOpen&&c.hideOverpanel(),i=this.$panels.filter("."+t),this.$panels.removeClass("active"),i.addClass("active")},renderError:function(e){this.$(".alertMsg").remove(),this.$el.prepend(this.alertMsg.setMessage(e).el)},onLinkClick:function(t){this.$trigger=e(t.currentTarget)},focusTrigger:function(){this.$trigger&&this.$trigger.focus()},removeSavedForm:function(){u.removeItem("savedForm")},onItemClick:function(t){var i,r,o=e(t.currentTarget),s=/settings/;"A"!==t.target.tagName&&0===e(t.target).closest("a").length&&(r=o.find(".fill-click"),i=r.attr("href"),i&&"#"!==i&&(i=i.replace(n.history.options.root,""),s.test(i)?n.history.navigate(i,{trigger:!0,replace:!1}):window.location.href=i))}});return d}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(13),n(6)],r=function(e,t,n){"use strict";var i=t.extend({el:".settings .nav > ul",events:{"click li":"onNavItemClick"},initialize:function(){this.listenTo(n,"nav:change",this.activateNavItem)},activateNavItem:function(e){var t=this.$("li."+e),n=t.find("a");this.$("li").removeClass("active"),this.$("li a").attr("aria-selected",!1).attr("aria-expanded",!1),t.addClass("active"),n.attr("aria-selected",!0).attr("aria-expanded",!0),n.blur()},onNavItemClick:function(t){var i;"A"!==t.target.tagName&&0===e(t.target).parent("a").length&&(i=e(t.currentTarget).find(".fill-click").attr("href"),i&&"#"!==i&&(i=i.replace(n.history.options.root,""),n.history.navigate(i,{trigger:!0,replace:!1})))}});return new i}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(14),n(13),n(64)],r=function(e,t,n,i,r,o){"use strict";var s=r.extend({el:".settings .profileBanner",events:{"click .innerCircle":"editPhoto"},initialize:function(){o.set(this.$(".nameWrapper").data("collection")),o.on("sync",e.proxy(this.renderName,this)),o.on("destroy",e.proxy(this.renderName,this))},renderName:function(){var n=e(".nameWrapper").data("collection"),r=t.extend(n,o.toJSON());i.viewRenderer.render("settings/inc/name",{name:r}).done(e.proxy(function(t){e(".profileBanner .nameWrapper .name").html(t)},this))},editName:function(e){e.preventDefault(),n.history.navigate("/settings/name/edit",{trigger:!0,replace:!1})},editPhoto:function(e){e.preventDefault(),n.history.navigate("/settings/photo/edit",{trigger:!0,replace:!1})}});return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";var t=e.Model.extend({url:function(){return e.history.options.root+"settings/name"},defaults:{isDefault:!1},parse:function(e){return e.data}});return new t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(13),n(66),n(26),n(67)],r=function(e,t,n,i,r){"use strict";var o=t.extend({el:"#js_profilePhotoView",template:"components/component-photoupload/profilePhotoView",events:{click:"showPhotoUploadOverpanel"},photoEl:{imgEl:"#js_user_icon",size:200},initialize:function(e){var t,i=this.$el.find("#js_profilePhotoParent"),o=i.attr("data-profile-photo"),s=i.attr("data-wurfl"),a=window.location.href.match(/myaccount\/(.*)/),l=a&&a[1]||"/";if(this.model=new n({contextRoot:l}),o)try{t=JSON.parse(o),t&&t[200]&&this.model.parse({200:t[200]}),t&&t[300]&&this.model.parse({300:t[300]})}catch(c){}this.model.set("isWireless",JSON.parse(s).isWireless),this.listenTo(this.model,"change:_200_url",this.render),this.render(),this._photoUploadView=this._photoUploadView||new r({model:this.model,uploadPhotoUrl:e&&e.uploadPhotoUrl})},afterRender:function(){this.listenTo(this.model,"change:hasFileReader",this.hasFileReader),this.model.checkForFileReader(),this.model.getHasPhoto()&&this.centerPhoto(this.photoEl)},centerPhoto:function(e){var t,n,i=e.imgEl,r=83,o=this.model.getImgDimensions(e.size),s=o.width,a=o.height;t=this.model.calculatePhotoPositioning({imgWidth:s,imgHeight:a,containerSideLength:r}),n={top:"-"+t.top+"px",left:"-"+t.left+"px"},this.$el.find(i).css(n)},showPhotoUploadOverpanel:function(e){return e.stopPropagation(),e.preventDefault(),this.model.getHasFileReader()?void i.setContent(this._photoUploadView):!1},hasFileReader:function(){this.$el.addClass("hasFileReader"),this.$el.find("#js_user_icon").removeClass("icon-profile-large"),this.$el.find("#js_user_icon").addClass("icon-profile-add-large")}});return o}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";var t=e.Model.extend({defaults:{hasPhoto:!1,fileMetadata:null,validPhotoFile:null,warningCode:null,isWireless:!1,previewPhoto:null,previewOrientation:null,previewPhotoTop:0,previewPhotoLeft:0,isConfirmation:!1,serverError:null,_32_url:null,_32_height:null,_32_width:null,_32_orientation:null,_64_url:null,_64_height:null,_64_width:null,_64_orientation:null,_96_url:null,_96_height:null,_96_width:null,_96_orientation:null,_200_url:null,_200_height:null,_200_width:null,_200_orientation:null,_300_url:null,_300_height:null,_300_width:null,_300_orientation:null,_400_url:null,_400_height:null,_400_width:null,_400_orientation:null},parseUploadSuccessModel:function(e){var t=e.get("photoUrls");this.set(this.defaults),this.parse(t)},parse:function(e){this.set({hasPhoto:!0,previewPhoto:null,isConfirmation:!1}),e[32]&&this.set({_32_url:e[32].url,_32_height:e[32].height,_32_width:e[32].width,_32_orientation:e[32].orientation}),e[64]&&this.set({_64_url:e[64].url,_64_height:e[64].height,_64_width:e[64].width,_64_orientation:e[64].orientation}),e[96]&&this.set({_96_url:e[96].url,_96_height:e[96].height,_96_width:e[96].width,_96_orientation:e[96].orientation}),e[200]&&this.set({_200_url:e[200].url,_200_height:e[200].height,_200_width:e[200].width,_200_orientation:e[200].orientation}),e[300]&&this.set({_300_url:e[300].url,_300_height:e[300].height,_300_width:e[300].width,_300_orientation:e[300].orientation}),e[400]&&this.set({_400_url:e[400].url,_400_height:e[400].height,_400_width:e[400].width,_400_orientation:e[400].orientation})},calculatePhotoPositioning:function(e){var t,n,i=parseInt(e.imgWidth,10),r=parseInt(e.imgHeight,10),o=e.containerSideLength,s=0,a=0;return i>r&&i/r>1.1?(t="landscape",n=o/r,a=(i*n-o)/2):r>i&&r/i>1.1?(t="portrait",n=o/i,s=(r*n-o)/2):t="square",{top:s,left:a,orientation:t}},getHasPhoto:function(){return this.get("hasPhoto")?!0:!1},getImgDimensions:function(e){var t=this.get("_"+e+"_height"),n=this.get("_"+e+"_width");return{height:t,width:n}},getWarningCode:function(){return this.get("warningCode")},getHasFileReader:function(){return this.get("hasFileReader")},clearWarningCode:function(){this.set({warningCode:null})},clearPreviewPhoto:function(){this.set({previewPhoto:null,isConfirmation:!1})},checkForFileReader:function(){this.get("hasFileReader")&&this.set({hasFileReader:null}),window.FileReader&&this.set({hasFileReader:!0})},setConfirmation:function(){this.set({isConfirmation:!0})},setServerError:function(e){this.set({serverError:e,isConfirmation:!1})}});return t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(6),n(13),n(26)],r=function(e,t,n,i){"use strict";var r,o=n.extend({el:"#overpanel",events:{"click #js_submitPhotoButton":"openFileExplorer","click #js_changePhotoButton":"openFileExplorer","change #js_photoUploadFileInput":"uploadPhoto","click #js_confirmPhotoButton":"sendPhoto","click #js_restartPhotoUploadButton":"showUploadPhotoView","click .close":"closeOverpanel",animationend:"focusOnAddPhotoButton",webkitAnimationEnd:"focusOnAddPhotoButton",oAnimationEnd:"focusOnAddPhotoButton",MSAnimationEnd:"focusOnAddPhotoButton"},template:"components/component-photoupload/photoUploadView",photoEl:{imgEl:"#js_profilePhoto",size:300},initialize:function(e){r=t.Model.extend({urlRoot:e.uploadPhotoUrl||"/myaccount/settings/photo"}),this.listenTo(this.model,"change:serverError",this.render),this.listenTo(this.model,"change:isConfirmation",this.render),this.listenTo(this.model,"change:contextRoot",this.render),this.listenTo(this.model,"change:warningCode",this.triggerWarning),this.listenTo(this.model,"validPhotoFile",this.handleUploadSuccess)},afterRender:function(){this.centerPhoto(this.photoEl)},centerPhoto:function(e){var t,n,i=e.imgEl,r=150,o=this.model.getImgDimensions(e.size),s=o.width,a=o.height;t=this.model.calculatePhotoPositioning({imgWidth:s,imgHeight:a,containerSideLength:r}),n={top:"-"+t.top+"px",left:"-"+t.left+"px"},this.$el.find(i).css(n)},openFileExplorer:function(){this.$el.find("#js_photoUploadFileInput").trigger("click")},handleUploadSuccess:function(){var e=this;this.addSpinner(),this.clearWarnings(),this.$el.find("#js_addingPhotoText").removeClass("hide"),setTimeout(function(){e.model.setConfirmation(),e.removeSpinner(),e.$("#js_addingPhotoText").addClass("hide"),e.render()},1e3)},clearWarnings:function(){this.$el.find("#js_photoWarning").addClass("hide"),this.$el.find(".js_allWarnings").addClass("hide"),this.model.clearWarningCode()},triggerWarning:function(){var e=this.model.getWarningCode();this.$el.find("#js_"+e).removeClass("hide"),this.$el.find("#js_photoWarning").removeClass("hide")},sendPhoto:function(e){var t,n=new FileReader,i=this.model.get("fileMetadata"),o=this;this.addSpinner(),this.$el.find("#js_addingPhotoText").removeClass("hide"),n.onload=function(e){t=new r({photo:e.target.result}),o.listenToOnce(t,"sync",o.handleSendPhotoResponse),o.listenToOnce(t,"error",o.showUploadErrorView),t.save()},n.readAsDataURL(i)},handleSendPhotoResponse:function(e){this.model.parseUploadSuccessModel(e),this.removeSpinner(),this.closeOverpanel(),this.stopListening(e);
},showUploadErrorView:function(e){this.model.setServerError(!0),this.removeSpinner(),this.stopListening(e)},uploadPhoto:function(e){var t,n=this,i=e.currentTarget.files[0],r=/image[/](jpeg|jpg|gif|png|bmp)/,o=new FileReader;return e.preventDefault(),this.clearWarnings(),i?i.type.match(r)?i.size>2097152?void this.model.set({warningCode:"fileTooLargeWarning"}):(this.model.clearWarningCode(),o.onload=function(e){var r,o,s,a,l,c;t=e.target.result,r=document.createElement("img"),r.src=t,r.id="renderedImage",r.classList.add("invisible"),o=document.body.appendChild(r),setTimeout(function(){l=o.getClientRects(),s=l[0].width,a=l[0].height,document.body.removeChild(o),c=n.model.calculatePhotoPositioning({imgWidth:s,imgHeight:a,containerSideLength:150}),n.model.set({validPhotoFile:!0,previewPhoto:t,fileMetadata:i,previewOrientation:c.orientation,previewPhotoTop:c.top,previewPhotoLeft:c.left}),n.handleUploadSuccess()},100,o,l,s,a,c,n)},void o.readAsDataURL(i)):void this.model.set({warningCode:"fileTypeWarning"}):void this.model.set({warningCode:"noFileWarning"})},showUploadPhotoView:function(){this.model.setServerError(!1)},closeOverpanel:function(){i.hideOverpanel(),this.model.clearPreviewPhoto()},addSpinner:function(){this.$el.addClass("hasSpinner")},removeSpinner:function(){this.$el.removeClass("hasSpinner")}});return o}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";return{parseQueryString:function(e){var t,n,i,r,o={};for(t=e.split("&"),i=0,r=t.length;r>i;i++)n=t[i].split("="),o[n[0]]=n[1];return o},isSubPage:function(e){var t,n=window.location.search,i=!1;if(n){n=n.slice(1),t=this.parseQueryString(n);for(var r in t)if("view"===r&&t[r]===e){i=!0;break}}return i}}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(70)],r=function(e){e.widget("pp.textField",{_create:function(){this._getElements(),this._addListeners(),this._load()},_getElements:function(){this.elements={},this.elements.parent=this.element,this.elements.input=this.element.find("input, textarea"),this.elements.helpErrors=this.element.find(".help-error"),this.elements.helpInformation=this.element.find(".help-information")},_addListeners:function(){this.elements.input.bind("focus",e.proxy(this._focus,this)),this.elements.input.bind("blur",e.proxy(this._blur,this)),this.elements.input.bind("complete",e.proxy(function(){this.closeBubble();var e=this.elements.input[0],t=this.validateField(e);t.valid?(this.elements.parent.removeClass("hasError"),this.elements.input.attr("aria-invalid","false")):(this.elements.parent.addClass("hasError"),this.elements.input.attr("aria-invalid","true"))},this)),this.elements.input.bind("error",e.proxy(this.openError,this))},_load:function(){this.elements.input.val()?this.elements.input.addClass("userText"):this.elements.input.removeClass("userText")},_blur:function(){this._load(),this.closeBubble();var e=this.elements.input[0],t=this.validateField(e);this._emptyFieldRule(t)},_emptyFieldRule:function(e){e.valid||"valueMissing"===e.error?(this.elements.parent.removeClass("hasError"),this.elements.input.attr("aria-invalid","false")):(this.elements.parent.addClass("hasError"),this.elements.input.attr("aria-invalid","true"))},_focus:function(e){this.closeAllBubble(),hasErrors=this.elements.parent.hasClass("hasError"),hasErrors?this.openError():this.openHelp()},openError:function(){var e=this.elements.input.attr("id");e&&e.length>0&&this.elements.input.attr("aria-describedby",e+"-help-error"),this.elements.helpErrors.addClass("open"),this.elements.parent.addClass("focus")},openHelp:function(e){var t=this.elements.input.attr("id");t&&t.length>0&&this.elements.input.attr("aria-describedby",t+"-help-information"),this.elements.helpInformation.addClass("open"),this.elements.parent.addClass("focus")},closeBubble:function(){var e=this.elements.input.attr("id");e&&e.length>0&&this.elements.input.removeAttr("aria-describedby"),this.elements.helpErrors.removeClass("open"),this.elements.helpInformation.removeClass("open"),this.elements.parent.removeClass("focus")},closeAllBubble:function(){e("p.open, div.open").removeClass("open"),this.elements.parent.removeClass("focus")},validateField:function(t){if(t&&e(t).data("skip-validate"))return{valid:!0};if(t.checkValidity){if(!t.checkValidity()){var n="";for(n in t.validity)if(t.validity[n]===!0&&"valid"!==n)return{valid:!1,error:n}}}else{if(validity={valueMissing:this.processRequired(),typeMismatch:!0,patternMismatch:this.processPattern(),rangeUnderflow:!0,rangeOverflow:!0,customError:!0},!validity.valueMissing)return{valid:!1,error:"valueMissing"};if(!validity.patternMismatch)return{valid:!1,error:"patternMismatch"}}return{valid:!0}},processRequired:function(){if("undefined"!=typeof this.elements.input.attr("required")){var t=this.elements.input.val();return null!=t&&e.trim(t).length>0?!0:!1}return!0},processPattern:function(){var e=this.elements.input;if(!e.attr("pattern"))return!0;var t=new RegExp("^"+e.attr("pattern")+"$");return t.test(e.val())}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){(function(e){/*! jQuery UI - v1.10.1 - 2013-03-11
	* http://jqueryui.com
	* Includes: jquery.ui.widget.js
	* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */
!function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(o){}r(t)},e.widget=function(t,n,i){var r,o,s,a,l={},c=t.split(".")[0];t=t.split(".")[1],r=c+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[c]=e[c]||{},o=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),a=new n,a.options=e.widget.extend({},a.options),e.each(i,function(t,i){return e.isFunction(i)?void(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(l[t]=i)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete o._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(n){for(var r,o,s=i.call(arguments,1),a=0,l=s.length;l>a;a++)for(r in s[a])o=s[a][r],s[a].hasOwnProperty(r)&&o!==t&&(e.isPlainObject(o)?n[r]=e.isPlainObject(n[r])?e.widget.extend({},n[r],o):e.widget.extend({},o):n[r]=o);return n},e.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;e.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),c=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var i,r=e.data(this,o);return r?e.isFunction(r[s])&&"_"!==s.charAt(0)?(i=r[s].apply(r,l),i!==r&&i!==t?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+s+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+s+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(s||{})._init():e.data(this,o,new r(s,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,o,s,a=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(a={},r=n.split("."),n=r.shift(),r.length){for(o=a[n]=e.widget.extend({},this.options[n]),s=0;s<r.length-1;s++)o[r[s]]=o[r[s]]||{},o=o[r[s]];if(n=r.pop(),i===t)return o[n]===t?null:o[n];o[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,s){function a(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?r.delegate(u,c,a):n.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),s&&e.effects&&e.effects.effect[a]?i[t](r):a!==t&&i[a]?i[a](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}})}(e)}).call(t,n(1))},function(e,t,n){var i,r;i=[n(1),n(70)],r=function(e){e.widget("pp.lap",{_create:function(){this._getElements(),this._addListeners(),this._check()},_getElements:function(){this.elements={},this.elements.input=this.element.find("input, textarea"),this.elements.label=this.element.find("label")},_addListeners:function(){var t=this.elements.input;this.elements.input.bind("change keyup",e.proxy(this._check,this)),this.elements.input.bind("focus",e.proxy(this._watch,this)),this.elements.input.bind("blur",e.proxy(this._unwatch,this)),this.elements.label.bind("click touchstart",function(e){e.preventDefault(),e.stopPropagation(),t.focus()}).hover(function(){t.addClass("hovered")},function(){t.removeClass("hovered")})},_check:function(){this.elements.input.val()?this.elements.label.addClass("accessAid"):this.elements.label.removeClass("accessAid")},_watch:function(){this._watchInterval=setInterval(e.proxy(this._check,this),200),this.elements.label.addClass("focus")},_unwatch:function(){clearInterval(this._watchInterval),this.elements.label.removeClass("focus")}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(8),n(1),n(70)],r=function(e,t){"use strict";t.widget("pp.checkbox",{options:{radio:!1},_create:function(){this.$el=this.element,this.options.radio&&this.$el.addClass("radio"),this.$input=this.$el.find("input"),this.$label=this.$el.find("label"),this.$input.off("click"),this.$input.on("click",t.proxy(this.onClick,this))},destroy:function(){t.Widget.prototype.destroy.call(this),this.$input.off("click")},onClick:function(n){var i=this;e.defer(function(){var e=t(n.currentTarget);i.options.radio?(e.parent().parent().find(".checked").removeClass("checked"),e.parent().siblings().find("span").removeClass("icon-checkmark-small"),i.toggleCheck(e,!0)):i.toggleCheck(e,!e.attr("checked"))})},toggleCheck:function(e,t){var n=this.$label.not(".disabled");t?e.attr("checked",!0):e.removeAttr("checked"),n.parent().toggleClass("checked",t),n.find("span").toggleClass("icon-checkmark-small",t)}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r,o;!function(s,a){n(74)&&(r=[n(8),n(1),n(6)],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o)))}(this,function(e,t,n){return n.Syphon=function(e,t,n){var i={};i.ignoredTypes=["button","submit","reset","fieldset"],i.serialize=function(e,i){var s={},c=a(i),u=r(e,c);return n.each(u,function(e){var n=t(e),i=o(n),r=c.keyExtractors.get(i),a=r(n),u=c.inputReaders.get(i),d=u(n),h=c.keyAssignmentValidators.get(i);if(h(n,a,d)){var f=c.keySplitter(a);s=l(s,f,d)}}),s},i.deserialize=function(e,i,s){var l=a(s),u=r(e,l),d=c(l,i);n.each(u,function(e){var n=t(e),i=o(n),r=l.keyExtractors.get(i),s=r(n),a=l.inputWriters.get(i),c=d[s];a(n,c)})};var r=function(e,i){var r=s(e),a=r.elements;return a=n.reject(a,function(e){var r,s=o(e),a=i.keyExtractors.get(s),l=a(t(e)),c=n.include(i.ignoredTypes,s),u=n.include(i.include,l),d=n.include(i.exclude,l);return r=u?!1:i.include?!0:d||c})},o=function(e){var n,i=t(e),r=i[0].tagName,o=r;return"input"===r.toLowerCase()&&(n=i.attr("type"),o=n?n:"text"),o.toLowerCase()},s=function(e){return n.isUndefined(e.$el)&&"form"===e.tagName.toLowerCase()?e:e.$el.is("form")?e.el:e.$("form")[0]},a=function(e){var t=n.clone(e)||{};return t.ignoredTypes=n.clone(i.ignoredTypes),t.inputReaders=t.inputReaders||i.InputReaders,t.inputWriters=t.inputWriters||i.InputWriters,t.keyExtractors=t.keyExtractors||i.KeyExtractors,t.keySplitter=t.keySplitter||i.KeySplitter,t.keyJoiner=t.keyJoiner||i.KeyJoiner,t.keyAssignmentValidators=t.keyAssignmentValidators||i.KeyAssignmentValidators,t},l=function(e,t,i){if(!t)return e;var r=t.shift();return e[r]||(e[r]=n.isArray(r)?[]:{}),0===t.length&&(n.isArray(e[r])?e[r].push(i):e[r]=i),t.length>0&&l(e[r],t,i),e},c=function(e,t,i){var r={};return n.each(t,function(t,o){var s={};i&&(o=e.keyJoiner(i,o)),n.isArray(t)?(o+="[]",s[o]=t):n.isObject(t)?s=c(e,t,o):s[o]=t,n.extend(r,s)}),r};return i}(n,t,e),n.Syphon.TypeRegistry=function(){this.registeredTypes={}},n.Syphon.TypeRegistry.extend=n.Model.extend,e.extend(n.Syphon.TypeRegistry.prototype,{get:function(e){var t=this.registeredTypes[e];return t||(t=this.registeredTypes["default"]),t},register:function(e,t){this.registeredTypes[e]=t},registerDefault:function(e){this.registeredTypes["default"]=e},unregister:function(e){this.registeredTypes[e]&&delete this.registeredTypes[e]}}),n.Syphon.KeyExtractorSet=n.Syphon.TypeRegistry.extend(),n.Syphon.KeyExtractors=new n.Syphon.KeyExtractorSet,n.Syphon.KeyExtractors.registerDefault(function(e){return e.prop("name")}),n.Syphon.InputReaderSet=n.Syphon.TypeRegistry.extend(),n.Syphon.InputReaders=new n.Syphon.InputReaderSet,n.Syphon.InputReaders.registerDefault(function(e){return e.val()}),n.Syphon.InputReaders.register("checkbox",function(e){var t=e.prop("checked");return t}),n.Syphon.InputWriterSet=n.Syphon.TypeRegistry.extend(),n.Syphon.InputWriters=new n.Syphon.InputWriterSet,n.Syphon.InputWriters.registerDefault(function(e,t){e.val(t)}),n.Syphon.InputWriters.register("checkbox",function(e,t){e.prop("checked",t)}),n.Syphon.InputWriters.register("radio",function(e,t){e.prop("checked",e.val()===t)}),n.Syphon.KeyAssignmentValidatorSet=n.Syphon.TypeRegistry.extend(),n.Syphon.KeyAssignmentValidators=new n.Syphon.KeyAssignmentValidatorSet,n.Syphon.KeyAssignmentValidators.registerDefault(function(){return!0}),n.Syphon.KeyAssignmentValidators.register("radio",function(e,t,n){return e.prop("checked")}),n.Syphon.KeySplitter=function(e){var t=e.match(/[^\[\]]+/g);return e.indexOf("[]")===e.length-2&&(lastKey=t.pop(),t.push([lastKey])),t},n.Syphon.KeyJoiner=function(e,t){return e+"["+t+"]"},n.Syphon})},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(13),n(44),n(68)],r=function(e,t,n,i,r,o){"use strict";var s=i.extend({initialize:function(e){this.options=e},afterRoute:function(){var e="/settings";r.get(this.options.id).destroy({headers:{id:this.options.id},wait:!0}),o.isSubPage("address")&&(e="settings/address"),n.history.navigate(e)}});return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(26),n(46),n(45),n(44),n(68),n(69),n(71),n(58),n(72),n(73)],r=function(e,t,n,i,r,o,s,a,l){"use strict";var c=i.extend({el:"#overpanel",template:"settings/address/edit",events:{"submit form[name=editAddress]":"saveAddress"},initialize:function(e){this.options=e},initWidgets:function(){this.$(".textInput").lap().textField(),this.$(".ppCheckbox").checkbox(),this.$(".selectDropdown").nativeDropdown(),this.formView=new o({el:"form[name=editAddress]"})},afterRoute:function(){this.model=a.findWhere({id:this.options.id}),r.setContent(this)},afterRender:function(){this.initWidgets()},saveAddress:function(e){var t=this.model.get("id"),i=this.model.get("country_code"),r=n.Syphon.serialize(this),o=a.findWhere({id:t}),s=o.get("entryMetadata"),l=o.get("displayMetadata");e.preventDefault(),this.listenToOnce(this.model,"error",this.submitError),this.listenToOnce(this.model,"sync",this.onAddressUpdate),this.model.clear(),this.model.set(r),this.model.set({id:t,country_code:i}),this.model.save(),this.model.set({entryMetadata:s,displayMetadata:l}),this.toggleLoading(!0)},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},onAddressUpdate:function(e){e.get("primary")&&(a.invoke("set",{primary:!1,billing:!1}),this.model.set({primary:!0,billing:!0})),a.reset(a.toJSON()),this.toggleLoading(!1),r.hideOverpanel()},updateAddressModel:function(e){return{id:e.id,addressLine1:{id:"street1",value:e.line1},addressLine2:{id:"street2",value:e.line2},city:{id:"city",value:e.city},state:{id:"state",value:e.state},zipcode:{id:"postalCode",value:e.postal_code},countryCode:e.country_code,primary:e.primary,billing:e.billing,confirmed:e.confirmed,cardList:e.cardList,paypalCredit:e.paypalCredit,entryMetadata:e.entryMetadata,displayMetadata:e.displayMetadata}},serialize:function(){var e=this.updateAddressModel(this.model.toJSON());return l.isSubPage("address")&&(e.lastUrl="settings/address"),e}});return c}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(13),n(78),n(45),n(44)],r=function(e,t,n,i,r,o,s){"use strict";var a=i.extend({initialize:function(e){this.options=e},afterRoute:function(){this.model=new r,this.listenToOnce(this.model,"sync",this.onAddressUpdate),this.model.set("id",this.options.id),this.model.save()},onAddressUpdate:function(e){var t=new o;t.set(e.attributes),s.add(t),n.history.navigate("/settings/account")}});return a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/address/undo"},idAttribute:"_id",defaults:{isDefault:!1},parse:function(e){return e.data&&e.data.state&&(e.data.fullState=e.data.state),e.data}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(14),n(8),n(6),n(61),n(26),n(46),n(80),n(81),n(69),n(71)],r=function(e,t,n,i,r,o,s,a,l){"use strict";var c=r.extend({el:"#overpanel",template:"settings/closeAccount/analyze",events:{"click .closeAccount":"closeAccount"},initialize:e.noop,afterRoute:function(){this.analyzeAccount()},analyzeAccount:function(){this.listenToOnce(a,"error",this.onCantCloseAccount),this.listenToOnce(a,"sync",this.onAnalyzeAccountSuccess),a.save(),o.setContent(this),this.toggleLoading(!0)},onCantCloseAccount:function(n,i,r){t.viewRenderer.render("settings/closeAccount/error",{reason:r}).done(e.proxy(function(t){this.toggleLoading(!1),e("#overpanel").html(t)},this))},onAnalyzeAccountSuccess:function(){t.viewRenderer.render("settings/closeAccount/review",{}).done(e.proxy(function(t){this.toggleLoading(!1),e("#overpanel").html(t)},this)),this.formView=new s({el:"form[name=closeAccount]"})},closeAccount:function(e){e.preventDefault(),this.listenToOnce(l,"error",this.onError),this.listenToOnce(l,"sync",this.onCloseAccountSuccess),l.save(),this.toggleLoading(!0)},onError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},onCloseAccountSuccess:function(){t.viewRenderer.render("settings/closeAccount/done",{}).done(e.proxy(function(t){this.toggleLoading(!1),e("#overpanel").html(t)},this)),this.toggleLoading(!1),window.location.replace("http://www.paypal.com")}});return c}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";var t=e.Model.extend({url:function(){return e.history.options.root+"settings/analyzeAccount"},defaults:{isDefault:!1},parse:function(e){return e.data}});return new t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";var t=e.Model.extend({url:function(){return e.history.options.root+"settings/closeAccount"},defaults:{isDefault:!1},parse:function(e){return e.data}});return new t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(61),n(26),n(46),n(83),n(69),n(71)],r=function(e,t,n,i){"use strict";var r=e.extend({el:"#overpanel",template:"settings/customerServicePin/newPin",events:{"submit form[name=customerServicePin]":"customerServicePin"},initialize:function(e){this.options=e},initWidgets:function(){this.$(".textInput").lap().textField(),this.formView=new n({el:"form[name=customerServicePin]"})},afterRoute:function(){this.customerServicePinModel=new i,t.setContent(this)},afterRender:function(){this.initWidgets()},customerServicePin:function(e){e.preventDefault(),this.listenToOnce(this.customerServicePinModel,"error",this.submitError),this.listenToOnce(this.customerServicePinModel,"sync",this.onPinUpdate),this.customerServicePinModel.set({pin:this.$("input[name=pin]").val(),confirmPin:this.$("input[name=confirmPin]").val()}),this.customerServicePinModel.save(),this.customerServicePinModel.clear(),this.toggleLoading(!0)},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},onPinUpdate:function(){this.toggleLoading(!1),t.hideOverpanel()}});return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/customerServicePin"},defaults:{isDefault:!1},parse:function(e){return e.data}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(14),n(13),n(85)],r=function(e,t,n,i,r,o){"use strict";var s=r.extend({el:".device",initialize:function(){this.initModels()},initModels:function(){var e=this.$el.data("collection");e.length&&o.add(e)}});return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6),n(86)],r=function(e,t){"use strict";var n=e.Collection.extend({url:function(){return e.history.options.root+"settings/devices"},model:t,deleteAll:function(t){var n=this;e.sync("delete",n,{success:function(e){n.reset(),t(null,e)},error:function(e,n,i){t(new Error(i))}})}});return new n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/device"},parse:function(e){return e.data.id=e.data.deviceId,e.data}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(14),n(8),n(6),n(61),n(26),n(46),n(85)],r=function(e,t,n,i,r,o,s,a){"use strict";var l=r.extend({el:"#overpanel",template:"settings/devices/edit",events:{"click .js_mobileDevices-delete":"deleteDevice","click .js_mobileDevices-deleteAll":"deleteAllDevices"},initialize:function(){this.listenTo(a,"reset",this.renderDevice),this.listenTo(a,"remove",this.renderDevice),this.listenTo(a,"error",this.renderError)},afterRender:function(){this.initWidgets()},afterRoute:function(){o.setContent(this)},initWidgets:function(){this.formView=new s({el:"form[name=editDevice]"})},renderDevice:function(){o.setContent(this)},deleteDevice:function(t){var n=this,r=e(t.currentTarget),o=r.data("id"),s=a.findWhere({id:o});t.preventDefault(),i.trigger("trackLinkName","deviceLogOut"),s&&(n.$el.addClass("hasSpinner"),s.destroy({headers:{id:o},wait:!0,success:function(){a.remove(s)},complete:function(){n.$el.removeClass("hasSpinner")}}))},deleteAllDevices:function(e){var t=this;e.preventDefault(),i.trigger("trackLinkName","deviceLogOutAll"),t.$el.addClass("hasSpinner"),a.deleteAll(function(){t.$el.removeClass("hasSpinner")})},serialize:function(){return{devices:a.toJSON()}}});return l}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(26),n(46),n(51),n(50),n(89),n(60),n(68),n(69),n(71),n(73)],r=function(e,t,n,i,r,o,s,a,l,c,u){"use strict";var d=i.extend({el:"#overpanel",template:"settings/email/add",events:{"submit form[name=addEmail]":"submitAddEmail"},initialize:function(){this.captchaView=new l({url:"/myaccount/settings/generateNewCaptcha"})},initWidgets:function(){this.$(".textInput").lap().textField(),this.formView=new o({el:"form[name=addEmail]"})},afterRoute:function(){r.setContent(this)},afterRender:function(){this.initWidgets()},initModels:function(){this.model=new s,this.listenToOnce(this.model,"error",this.submitError),this.listenToOnce(this.model,"sync",this.onEmailUpdate),this.listenToOnce(this.model,"captcha",this.renderCaptcha)},submitAddEmail:function(e){e.preventDefault();var t=n.Syphon.serialize(this);c.setItem("savedForm",t),this.initModels(),this.model.set(t),this.model.save(),this.toggleLoading(!0)},submitError:function(e,t,n){this.removeSavedForm(),this.toggleLoading(!1),this.formView.showError(n)},renderCaptcha:function(e,t,n){var i=this.captchaView,r=this.$(".captchaPlaceholder");i.setElement(r),i.model.set(n),i.$el.removeClass("hide"),this.toggleLoading(!1)},onEmailUpdate:function(e){this.removeSavedForm(),a.add(e),this.toggleLoading(!1),r.hideOverpanel()},serialize:function(){var e=c.getItem("savedForm");return u.isSubPage("email")&&(e||(e={}),e.lastUrl="settings/email"),this.removeSavedForm(),e}});return d}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(13),n(6),n(90)],r=function(e,t,n){"use strict";return e.extend({el:".captchaPlaceholder",template:"components/component-captcha/captcha",events:{"click .refresh":"refreshCaptcha","click .audio":"showAudio"},initialize:function(e){this.model=new n,this.listenTo(this.model,"change",this.render),e&&this.model.set(e)},refreshCaptcha:function(){this.model.fetch(),this.trigger("loading",!0)},showAudio:function(){var e=this.$("#captchaAudio");e.removeClass("hide"),e[0].play()},afterRender:function(){this.trigger("loading",!1)}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({urlRoot:function(){return this.get("url")||e.history.options.root+"generateNewCaptcha"},defaults:{captchaImgUrl:"",captchaAudioUrl:""},validate:function(e){return e.captchaImgUrl&&e.captchaAudioUrl?void 0:"Not a valid captcha"}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(13),n(50),n(68)],r=function(e,t,n,i,r,o){"use strict";var s=i.extend({initialize:function(e){this.options=e},afterRoute:function(){var e=r.get(this.options.id),t="/settings";e.destroy({headers:{id:this.options.id},wait:!0}),o.isSubPage("email")&&(t="settings/email"),n.history.navigate(t)}});return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(26),n(46),n(51),n(93),n(50),n(94),n(68),n(69),n(71),n(58),n(72),n(73)],r=function(e,t,n,i,r,o,s,a,l,c,u){"use strict";var d=i.extend({el:"#overpanel",template:"settings/email/edit",events:{"submit form[name=editEmail]":"saveEmail","click a.confirm":"confirmEmail"},initialize:function(e){this.options=e},initWidgets:function(){c.cssanimations&&this.$(".confirm-email").addClass("active"),this.$(".textInput").lap().textField(),this.$(".ppCheckbox").checkbox(),this.$(".selectDropdown").nativeDropdown(),this.formView=new o({el:"form[name=editEmail]"})},afterRoute:function(){this.model=l.findWhere({id:this.options.id}),this.model.set({paypalCredit:e(".notifications .paypalCredit").data("credit")}),u.isSubPage("email")&&this.model.set({lastUrl:"settings/email"}),r.setContent(this)},afterRender:function(){this.initWidgets()},saveEmail:function(e){e.preventDefault();var t=n.Syphon.serialize(this),i=this.model;this.listenToOnce(i,"error",this.submitError),this.listenToOnce(i,"sync",this.onEmailUpdate),i.set(t),i.changed&&i.changed.primary?i.fetch({method:"put",data:i.toJSON(),url:"/myaccount/settings/email/setPrimary",reset:!0}):i.save(),this.toggleLoading(!0)},confirmEmail:function(){var e=this.$(".confirm-email");return this.$(".alertMsg").remove(),e.find(".confirm").hide(),e.find(".send").show(),this.confirmEmailModel=new a,this.listenToOnce(this.confirmEmailModel,"error",this.confirmError),this.listenToOnce(this.confirmEmailModel,"sync",this.confirmDone),this.confirmEmailModel.set("id",this.options.id),this.confirmEmailModel.save(),!1},confirmError:function(e,t,n){this.$(".confirm-email").find(".send").hide(),this.$(".confirm-email").find(".confirm").show(),this.submitError(e,t,n)},confirmDone:function(e){var t=this.$(".confirm-email");t.find(".send").hide(),t.find(".done").show()},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},onEmailUpdate:function(e){e.get("primary")&&(l.invoke("set",{primary:!1}),this.model.set("primary",!0)),l.reset(l.toJSON()),this.toggleLoading(!1),r.hideOverpanel()},serialize:function(){return this.model.toJSON()}});return d}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/email/confirm"},idAttribute:"confirm",defaults:{isDefault:!1},parse:function(e){return e.data}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){(function(){window.Modernizr=function(e,t,n){function i(e){y.cssText=e}function r(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function s(e,t){for(var i in e){var r=e[i];if(!o(r,"-")&&y[r]!==n)return"pfx"==t?r:!0}return!1}function a(e,t,i){for(var o in e){var s=t[e[o]];if(s!==n)return i===!1?e[o]:r(s,"function")?s.bind(i||t):s}return!1}function l(e,t,n){var i=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+b.join(i+" ")+i).split(" ");return r(t,"string")||r(t,"undefined")?s(o,t):(o=(e+" "+x.join(i+" ")+i).split(" "),a(o,t,n))}var c,u,d,h="2.8.3",f={},p=!0,g=t.documentElement,m="modernizr",v=t.createElement(m),y=v.style,w=({}.toString,"Webkit Moz O ms"),b=w.split(" "),x=w.toLowerCase().split(" "),E={},k=[],C=k.slice,S={}.hasOwnProperty;d=r(S,"undefined")||r(S.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(e,t){return S.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=C.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=t.prototype;var o=new r,s=t.apply(o,n.concat(C.call(arguments)));return Object(s)===s?s:o}return t.apply(e,n.concat(C.call(arguments)))};return i}),E.cssanimations=function(){return l("animationName")};for(var T in E)d(E,T)&&(u=T.toLowerCase(),f[u]=E[T](),k.push((f[u]?"":"no-")+u));return f.addTest=function(e,t){if("object"==typeof e)for(var i in e)d(e,i)&&f.addTest(i,e[i]);else{if(e=e.toLowerCase(),f[e]!==n)return f;t="function"==typeof t?t():t,"undefined"!=typeof p&&p&&(g.className+=" "+(t?"":"no-")+e),f[e]=t}return f},i(""),v=c=null,function(e,t){function n(e,t){var n=e.createElement("p"),i=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function r(e){var t=v[e[g]];return t||(t={},m++,e[g]=m,v[m]=t),t}function o(e,n,i){if(n||(n=t),u)return n.createElement(e);i||(i=r(n));var o;return o=i.cache[e]?i.cache[e].cloneNode():p.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e),!o.canHaveChildren||f.test(e)||o.tagUrn?o:i.frag.appendChild(o)}function s(e,n){if(e||(e=t),u)return e.createDocumentFragment();n=n||r(e);for(var o=n.frag.cloneNode(),s=0,a=i(),l=a.length;l>s;s++)o.createElement(a[s]);return o}function a(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function l(e){e||(e=t);var i=r(e);return y.shivCSS&&!c&&!i.hasCSS&&(i.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||a(e,i),e}var c,u,d="3.7.0",h=e.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",m=0,v={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",c="hidden"in e,u=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){c=!0,u=!0}}();var y={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:h.shivCSS!==!1,supportsUnknownElements:u,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:s};e.html5=y,l(t)}(this,t),f._version=h,f._domPrefixes=x,f._cssomPrefixes=b,f.testProp=function(e){return s([e])},f.testAllProps=l,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(p?" js "+k.join(" "):""),f}(this,this.document),function(e,t,n){function i(e){return"[object Function]"==m.call(e)}function r(e){return"string"==typeof e}function o(){}function s(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function a(){var e=v.shift();y=1,e?e.t?p(function(){("c"==e.t?h.injectCss:h.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),a()):y=0}function l(e,n,i,r,o,l,c){function u(t){if(!f&&s(d.readyState)&&(w.r=f=1,!y&&a(),d.onload=d.onreadystatechange=null,t)){"img"!=e&&p(function(){x.removeChild(d)},50);for(var i in T[n])T[n].hasOwnProperty(i)&&T[n][i].onload()}}var c=c||h.errorTimeout,d=t.createElement(e),f=0,m=0,w={t:i,s:n,e:o,a:l,x:c};1===T[n]&&(m=1,T[n]=[]),"object"==e?d.data=n:(d.src=n,d.type=e),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){u.call(this,m)},v.splice(r,0,w),"img"!=e&&(m||2===T[n]?(x.insertBefore(d,b?null:g),p(u,c)):T[n].push(d))}function c(e,t,n,i,o){return y=0,t=t||"j",r(e)?l("c"==t?k:E,e,t,this.i++,n,i,o):(v.splice(this.i++,0,e),1==v.length&&a()),this}function u(){var e=h;return e.loader={load:c,i:0},e}var d,h,f=t.documentElement,p=e.setTimeout,g=t.getElementsByTagName("script")[0],m={}.toString,v=[],y=0,w="MozAppearance"in f.style,b=w&&!!t.createRange().compareNode,x=b?f:g.parentNode,f=e.opera&&"[object Opera]"==m.call(e.opera),f=!!t.attachEvent&&!f,E=w?"object":f?"script":"img",k=f?"script":E,C=Array.isArray||function(e){return"[object Array]"==m.call(e)},S=[],T={},_={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};h=function(e){function t(e){var t,n,i,e=e.split("!"),r=S.length,o=e.pop(),s=e.length,o={
url:o,origUrl:o,prefixes:e};for(n=0;s>n;n++)i=e[n].split("="),(t=_[i.shift()])&&(o=t(o,i));for(n=0;r>n;n++)o=S[n](o);return o}function s(e,r,o,s,a){var l=t(e),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(r&&(r=i(r)?r:r[e]||r[s]||r[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,r,o,s,a):(T[l.url]?l.noexec=!0:T[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(i(r)||i(c))&&o.load(function(){u(),r&&r(l.origUrl,a,s),c&&c(l.origUrl,a,s),T[l.url]=2})))}function a(e,t){function n(e,n){if(e){if(r(e))n||(d=function(){var e=[].slice.call(arguments);h.apply(this,e),f()}),s(e,d,t,0,c);else if(Object(e)===e)for(l in a=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(l)&&(!n&&!--a&&(i(d)?d=function(){var e=[].slice.call(arguments);h.apply(this,e),f()}:d[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),f()}}(h[l])),s(e[l],d,t,l,c))}else!n&&f()}var a,l,c=!!e.test,u=e.load||e.both,d=e.callback||o,h=d,f=e.complete||o;n(c?e.yep:e.nope,!!u),u&&n(u)}var l,c,d=this.yepnope.loader;if(r(e))s(e,0,d,0);else if(C(e))for(l=0;l<e.length;l++)c=e[l],r(c)?s(c,0,d,0):C(c)?h(c):Object(c)===c&&a(c,d);else Object(e)===e&&a(e,d)},h.addPrefix=function(e,t){_[e]=t},h.addFilter=function(e){S.push(e)},h.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",d=function(){t.removeEventListener("DOMContentLoaded",d,0),t.readyState="complete"},0)),e.yepnope=u(),e.yepnope.executeStack=a,e.yepnope.injectJs=function(e,n,i,r,l,c){var u,d,f=t.createElement("script"),r=r||h.errorTimeout;f.src=e;for(d in i)f.setAttribute(d,i[d]);n=c?a:n||o,f.onreadystatechange=f.onload=function(){!u&&s(f.readyState)&&(u=1,n(),f.onload=f.onreadystatechange=null)},p(function(){u||(u=1,n(1))},r),l?f.onload():g.parentNode.insertBefore(f,g)},e.yepnope.injectCss=function(e,n,i,r,s,l){var c,r=t.createElement("link"),n=l?a:n||o;r.href=e,r.rel="stylesheet",r.type="text/css";for(c in i)r.setAttribute(c,i[c]);s||(g.parentNode.insertBefore(r,g),p(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))}}).call(window)},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(26),n(96),n(46),n(69),n(71),n(58),n(73)],r=function(e,t,n,i,r,o,s){"use strict";var a=i.extend({el:"#overpanel",template:"settings/email/validate",CLOSE_DELAY:1e4,events:{"submit form[name=setPrimaryEmail]":"submitSetPrimary"},afterRoute:function(){r.setContent(this)},afterRender:function(){this.formView=new s({el:"form[name=setPrimary]"}),setTimeout(function(){r.hideOverpanel()},this.CLOSE_DELAY)},submitSetPrimary:function(e){e.preventDefault();var t=n.Syphon.serialize(this);this.model=new o,this.listenToOnce(this.model,"error",this.submitError),this.listenToOnce(this.model,"sync",this.onPrimaryUpdate),this.model.set(t),this.model.save(),this.toggleLoading(!0)},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},onPrimaryUpdate:function(){this.toggleLoading(!1),r.hideOverpanel()},serialize:function(){return{error:this.$el.data("error"),data:this.$el.data("data")}}});return a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/email/primary"},idAttribute:"confirm",defaults:{isDefault:!1},parse:function(e){return e.data}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(50),n(51),n(32),n(98),n(46)],r=function(e,t,n,i,r,o,s,a,l){"use strict";var c=i.extend({el:".sidepanel.email",template:"settings/notifications/emailSidePanel",events:{"click .emails li":"setPrimaryEmail","click .leftIcon":"hideSidePanel"},initialize:function(){r.length||r.add(e(".stage .account ul.emails").data("collection")),this.listenTo(r,"reset",this.renderEmails),this.sidepanel=new s({el:this.el}),this.renderEmails()},renderEmails:function(){this.sidepanel.setContent(this)},setPrimaryEmail:function(t){t.preventDefault();var i=e(t.currentTarget);this.emailModel=r.findWhere({id:i.attr("id")}),this.emailModel.url=n.history.options.root+"settings/email/setPrimary",r.invoke("set",{primary:!1}),this.listenToOnce(this.emailModel,"sync",this.emailUpdated),this.listenToOnce(this.emailModel,"error",this.submitError),this.emailModel.save(),this.toggleLoading(!0)},emailUpdated:function(){r.reset(r.toJSON()),this.toggleLoading(!1),n.trigger("email:update",this.emailModel.toJSON())},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},afterRender:function(){this.emailFormat=new a,this.formView=new l({el:"form[name=updatePrimaryEmail]"})},showSidePanel:function(){this.sidepanel.showSidePanel()},hideSidePanel:function(){this.sidepanel.hideSidePanel()},serialize:function(){return{emails:r.toJSON()}}});return c}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(46),n(99)],r=function(e,t,n,i,r,o){"use strict";var s=i.extend({el:".emailFormat",template:"settings/notifications/emailFormat",events:{"click .type":"updateNotification"},initialize:function(){o.length||o.add(e(".stage .notifications").data("collection")),this.model=o.findWhere({id:"HTML_FORMAT_ENABLED"}),this.render()},afterRender:function(){this.formView=new r({el:"form[name=emailFormat]"})},toggleEmailType:function(){this.render(),this.toggleLoading(!1)},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},updateNotification:function(n){n.preventDefault();var i,r=e(n.currentTarget),o="OFF";"html"===r.attr("for")&&(o="ON"),i=t.findWhere(this.model.get("channels"),{type:"EMAIL"}),i&&(i.status=o),this.listenToOnce(this.model,"sync",this.toggleEmailType),this.listenToOnce(this.model,"error",this.submitError),this.model.save(),this.toggleLoading(!0)},serialize:function(){return this.model.toJSON()}});return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6),n(100)],r=function(e,t){"use strict";var n=e.Collection.extend({url:function(){return e.history.options.root+"settings/notificationPreferences"},model:t,parse:function(e){return e}});return new n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/notificationPreference"},defaults:{isDefault:!1},parse:function(e){return e.data}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(61),n(26),n(46),n(102),n(69),n(71)],r=function(e,t,n,i){"use strict";var r=e.extend({el:"#overpanel",template:"settings/mobilePin/newPin",events:{"submit form[name=mobilePin]":"mobilePin"},initialize:function(e){this.options=e},initWidgets:function(){this.$(".textInput").lap().textField(),this.formView=new n({el:"form[name=mobilePin]"})},afterRoute:function(){this.mobilePinModel=new i,t.setContent(this)},afterRender:function(){this.initWidgets()},mobilePin:function(e){e.preventDefault(),this.listenToOnce(this.mobilePinModel,"error",this.submitError),this.listenToOnce(this.mobilePinModel,"sync",this.onPinUpdate),this.mobilePinModel.set({pin:this.$("input[name=pin]").val(),confirmPin:this.$("input[name=confirmPin]").val()}),this.mobilePinModel.save(),this.mobilePinModel.clear(),this.toggleLoading(!0)},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},onPinUpdate:function(){this.toggleLoading(!1),t.hideOverpanel()}});return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/mobilePin"},defaults:{isDefault:!1},parse:function(e){return e.data}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(61),n(26),n(46),n(64),n(69),n(71)],r=function(e,t,n,i,r,o){"use strict";var s=n.extend({el:"#overpanel",template:"settings/name/done",events:{"submit form[name=saveName]":"submitName"},initialize:function(){o.get("first")||o.set(e(".nameWrapper").data("collection"))},initWidgets:function(){this.$(".textInput").lap().textField(),this.formView=new r({el:"form[name=saveName]"})},afterRoute:function(){i.setContent(this)},afterRender:function(){this.initWidgets()},submitName:function(t){t.preventDefault();var n=this.$el.find("input[name=firstName]").val(),i=this.$el.find("input[name=lastName]").val(),r=n+" "+i;this.listenToOnce(o,"error",e.proxy(this.submitError,this)),this.listenToOnce(o,"sync",e.proxy(this.onNameUpdate,this)),o.set({first:n,last:i,full_name:r}),o.save(),this.toggleLoading(!0)},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},onNameUpdate:function(){o.set(o.toJSON()),this.toggleLoading(!1),i.hideOverpanel()},serialize:function(){return{user:o.toJSON()}}});return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(6),n(8),n(14),n(61),n(99),n(97),n(105),n(26),n(46),n(72)],r=function(e,t,n,i,r,o,s,a,l,c){"use strict";var u=r.extend({el:".stage .notifications",events:{submit:"preventSubmit","change .emailInput, .smsInput":"toggleEmailSMS","change .ppCheckbox input:not(.js_allMarketingOffers)":"toggleCheckbox","change .js_allMarketingOffers":"toggleAllMarketingOffers","click .emailList":"toggleEmailPanel","click .phoneList":"togglePhonePanel"},initialize:function(){this.groupedNotificationIds=this.$el.data("collection"),o.length||o.add(n.flatten(n.values(this.groupedNotificationIds))),this.listenTo(t,"adChoice:update",this.updateAdChoice),this.listenTo(t,"statementPreference:update",this.updateStatementPreference),this.listenTo(t,"email:update",this.updatePrimaryEmail),this.listenTo(t,"phone:update",this.updatePrimaryPhone),this.formView=new c({el:"form[name=updateNotifications]"}),this.$(".ppCheckbox").checkbox(),this.initializeCombinedCheckbox()},initializeCombinedCheckbox:function(){var e,t,i=this.$(".js_allMarketingOffersCheckbox"),r=i?i.data("pp-checkbox"):null;r&&(t=n.pluck([].concat(this.groupedNotificationIds.OFFERS,this.groupedNotificationIds.MARKETING),"id"),this.marketingNotifications=o.clone(),this.marketingNotifications.remove(o.filter(function(e){return!n.contains(t,e.id)})),this.marketingNotifications.on("error",n.bind(this.submitError,this)),e=this.marketingNotifications.some(function(e){var t=e.get("channels")||[];return n.some(t,function(e){return!e.readonly&&"ON"===e.status})}),e&&r.toggleCheck(r.$input,!0))},updateStatementPreference:function(e){var t=this;i.viewRenderer.render("settings/notifications/creditStatement",e).done(function(e){t.$(".paypalCredit .notificationList .statement").html(e)})},updatePrimaryEmail:function(e){var t=this;i.viewRenderer.render("settings/notifications/email",e).done(function(e){t.$(".emailList").html(e)})},updatePrimaryPhone:function(e){var t=this;i.viewRenderer.render("settings/notifications/phone",e).done(function(e){t.$(".phoneList").html(e)})},toggleEmailPanel:function(e){e.preventDefault(),this.emailSidePanel?this.emailSidePanel.showSidePanel():this.emailSidePanel=new s},togglePhonePanel:function(e){e.preventDefault(),this.phoneSidePanel?this.phoneSidePanel.showSidePanel():this.phoneSidePanel=new a},renderEnvelopePhone:function(){var e=this.model.get("id"),t=this.model.get("channels"),n=t&&t[0]&&t[0].type,r=this;"EMAIL"===n?i.viewRenderer.render("settings/notifications/envelopeCheckbox",this.model.toJSON()).done(function(t){r.$("#"+e+" .email").html(t)}):"SMS"===n&&i.viewRenderer.render("settings/notifications/phoneCheckbox",this.model.toJSON()).done(function(t){r.$("#"+e+" .sms").html(t)}),this.toggleLoading(!1)},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},toggleEmailSMS:function(e){e.preventDefault();var t,i,r=this.$(e.currentTarget),s=r.data("id"),a=r.data("type"),l=[],c=!0,u=this;"checked"===r.attr("checked")&&(c=!1),"COMBINED_OFFER_EXPIRED"===s?l.push("COUPON_EXPIRED","OFFER_EXPIRED","COMBINED_OFFER_EXPIRED"):"COMBINED_OFFER_TRANSFERRED"===s?l.push("COUPON_RECEIVED","COUPON_TRANSFERRED","COMBINED_OFFER_TRANSFERRED"):"COMBINED_PAYMENT_RECEIVED"===s?l.push("PAYMENT_RECEIVED_SM","PAYMENT_RECEIVED","COMBINED_PAYMENT_RECEIVED"):l.push(s),n.each(l,function(e){u.model=o.findWhere({id:e}),t=u.model.get("channels"),i=t&&t.filter(function(e){return e.type===a}),i&&i.length>0&&(u.model.set("channels",i),u.model.get("channels")[0].status=c?"ON":"OFF"),u.listenToOnce(u.model,"sync",u.renderEnvelopePhone),u.listenToOnce(u.model,"error",u.submitError),-1===e.indexOf("COMBINED")&&u.model.save()}),this.toggleLoading(!0)},toggleCheckbox:function(e){e.preventDefault();var t,n,i=this.$(e.currentTarget),r=i.data("id"),s=i.data("type"),a=!0;"checked"===i.attr("checked")&&(a=!1),this.model=o.findWhere({id:r}),n=this.model&&this.model.get("channels"),t=n&&n.filter(function(e){return e.type===s}),t&&t.length>0&&(this.model.set("channels",t),this.model.get("channels")[0].status=a?"ON":"OFF"),this.model&&this.model.save()},toggleAllMarketingOffers:function(e){e.preventDefault();var i=this.$(e.currentTarget),r=!0;"checked"===i.attr("checked")&&(r=!1),this.marketingNotifications.each(function(e){var t=e.get("channels")||[];n.each(t,function(e){e.readonly||(e.status=r?"ON":"OFF")})}),t.sync("update",this.marketingNotifications)},preventSubmit:function(e){e.preventDefault()},updateAdChoice:function(e){var t=this;i.viewRenderer.render("settings/inc/choice",e).done(function(e){t.$(".choice").html(e)})}});return u}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(53),n(54),n(32),n(46)],r=function(e,t,n,i,r,o,s,a){"use strict";var l=i.extend({el:".sidepanel.phone",template:"settings/notifications/phoneSidePanel",events:{"click .phones li":"setPrimaryPhone","click .leftIcon":"hideSidePanel"},initialize:function(){r.length||r.add(e(".stage .account ul.phones").data("collection")),this.listenTo(r,"reset",this.renderPhones),this.sidepanel=new s({el:this.el}),this.renderPhones()},renderPhones:function(){this.sidepanel.setContent(this)},setPrimaryPhone:function(t){t.preventDefault();var i=e(t.currentTarget);this.phoneModel=r.findWhere({id:i.attr("id")}),this.phoneModel.url=n.history.options.root+"settings/phone/setPrimary",r.invoke("set",{primary:!1}),this.listenToOnce(this.phoneModel,"sync",this.phoneUpdated),this.listenToOnce(this.phoneModel,"error",this.submitError),this.phoneModel.save(),this.toggleLoading(!0)},phoneUpdated:function(){r.reset(r.toJSON()),this.toggleLoading(!1),n.trigger("phone:update",this.phoneModel.toJSON())},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},afterRender:function(){this.formView=new a({el:"form[name=updatePrimaryPhone]"})},showSidePanel:function(){this.sidepanel.showSidePanel()},hideSidePanel:function(){this.sidepanel.hideSidePanel()},serialize:function(){return{phones:r.toJSON()}}});return l}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(14),n(61),n(26),n(46),n(100),n(99),n(72)],r=function(e,t,n,i,r,o,s,a,l){"use strict";var c=r.extend({el:"form[name='editStatementPreferences']",template:"settings/notifications/electronicAgreement",events:{"change #consent":"toggleAgreeButton","click .agree:not(.disabled)":"updatePreferences"},initialize:function(){l.length||l.add(t.flatten(t.values(e(".stage .notifications").data("collection")))),this.formView=new s({el:"form[name=editStatementPreferences]"}),this.model=l.findWhere({id:"STATEMENTS_DISCLOSURES"}),this.model.get("channels").sort(function(e,t){return e.type>t.type}),this.render()},afterRender:function(){this.setElement(this.$el.selector),this.$(".ppCheckbox").checkbox()},afterRoute:function(){o.setContent(this)},toggleAgreeButton:function(t){var n=e(t.currentTarget),i=this.$(".agree");n.siblings("label").is(".checked")?(n.siblings("label").removeClass("checked"),i.addClass("disabled")):(n.siblings("label").addClass("checked"),i.removeClass("disabled"))},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},updatePreferences:function(e){e.preventDefault(),this.listenToOnce(this.model,"error",this.submitError),this.listenToOnce(this.model,"sync",this.onPreferencesUpdated),t.each(this.model.get("channels"),function(e){"PAPER"===e.type&&(e.status="OFF")}),this.model.save(),this.toggleLoading(!0)},onPreferencesUpdated:function(t){this.toggleLoading(!1),i.viewRenderer.render("settings/notifications/success",t.attributes).done(e.proxy(function(t){this.toggleLoading(!1),e("#overpanel").html(t)},this)),n.trigger("statementPreference:update",this.model.toJSON())}});return c}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(14),n(61),n(26),n(46),n(100),n(99)],r=function(e,t,n,i,r,o,s,a,l){"use strict";var c=r.extend({el:"form[name='editStatementPreferences']",template:"settings/notifications/paperAgreement",events:{"click .agree:not(.disabled)":"updatePreferences"},initialize:function(){l.length||l.add(t.flatten(t.values(e(".stage .notifications").data("collection")))),this.formView=new s({el:"form[name=editStatementPreferences]"}),this.render()},afterRender:function(){this.setElement(this.$el.selector)},afterRoute:function(){o.setContent(this)},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},updatePreferences:function(e){e.preventDefault(),this.model=l.findWhere({id:"STATEMENTS_DISCLOSURES"}),this.listenToOnce(this.model,"error",this.submitError),this.listenToOnce(this.model,"sync",this.onPreferencesUpdated),t.each(this.model.get("channels"),function(e){"PAPER"===e.type&&(e.status="ON")}),this.model.save(),this.toggleLoading(!0)},onPreferencesUpdated:function(t){this.toggleLoading(!1),i.viewRenderer.render("settings/notifications/success",t.attributes).done(e.proxy(function(t){this.toggleLoading(!1),e("#overpanel").html(t)},this)),n.trigger("statementPreference:update",this.model.toJSON())}});return c}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(61),n(26),n(46),n(109),n(69),n(71)],r=function(e,t,n,i,r,o){"use strict";var s=n.extend({el:"#overpanel",template:"settings/password/change",events:{"submit form[name=changePassword]":"changePassword"},initialize:function(){},afterRoute:function(){this.changePasswordModel=new o,i.setContent(this)},changePassword:function(e){e.preventDefault(),this.listenToOnce(this.changePasswordModel,"error",this.submitError),this.listenToOnce(this.changePasswordModel,"sync",this.onPasswordUpdate),this.changePasswordModel.set({oldPassword:this.$el.find("input[name=password]").val(),password:this.$el.find("input[name=newPassword]").val(),confirmNewPassword:this.$el.find("input[name=confirmNewPassword]").val()}),this.changePasswordModel.save(),this.changePasswordModel.clear(),this.toggleLoading(!0)},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},onPasswordUpdate:function(){this.toggleLoading(!1),i.hideOverpanel()},afterRender:function(){this.$(".textInput").lap().textField(),this.formView=new r({el:"form[name=changePassword]"})}});return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/updatePassword"},defaults:{isDefault:!1},parse:function(e){return e.data}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(26),n(54),n(53),n(111),n(46),n(60),n(68),n(69),n(71),n(58),n(72),n(73)],r=function(e,t,n,i,r,o,s,a,l,c,u){"use strict";var d=i.extend({el:"#overpanel",template:"settings/phone/add",events:{"submit form[name=addPhone]":"savePhone"},initialize:function(){var t=e("#js_phones-list").data("links");this.linksModel=new n.Model({agreement:t.userAgreement.linkUrl,privacy:t.privacy.linkUrl})},initWidgets:function(){this.$(".textInput").lap().textField(),this.$(".ppCheckbox").checkbox(),this.$(".selectDropdown").nativeDropdown(),this.formView=new l({el:"form[name=addPhone]"})},afterRoute:function(){r.setContent(this)},afterRender:function(){this.initWidgets()},initModels:function(){var e=this;this.model=new o,this.listenToOnce(this.model,"error",this.submitError),this.listenToOnce(this.model,"sync",this.onPhoneAdded),this.listenToOnce(this.model,"invalid",function(t,n){e.handleError(),e.formView.showError(n)})},savePhone:function(e){e.preventDefault(),this.initModels();var t=n.Syphon.serialize(this),i=this.$el.find('select[name="type"] option:selected').val();c.setItem("savedForm",t),this.$("#primary:checked").length>0&&s.setPrimaryFalse(i),this.model.set(t),this.model.set({error:this.$(".phoneNumber .help-error").text(),phoneNumber:this.$el.find("input[name=phoneNumber]").val().replace(/\D/g,"")}),this.toggleLoading(!0),this.model.save()},handleError:function(){this.removeSavedForm(),this.toggleLoading(!1)},submitError:function(t,n,i){i||(i=e(".phoneNumber .help-error").text()),this.handleError(),this.formView.showError(i)},onPhoneAdded:function(t){var n=e(".settings").data("features");this.removeSavedForm(),s.add(t),"MOBILE"===t.get("type")&&n.confirmMobile&&t.get("mobileConfirmable")?this.confirmPhone():(this.toggleLoading(!1),r.hideOverpanel())},confirmPhone:function(){this.confirmPhoneModel=new a,this.listenToOnce(this.confirmPhoneModel,"error",this.submitError),this.listenToOnce(this.confirmPhoneModel,"sync",this.confirmationCodeSent),this.confirmPhoneModel.set("id",this.model.get("id")),this.confirmPhoneModel.save()},confirmationCodeSent:function(){this.toggleLoading(!1),n.history.navigate("settings/phone/validate/"+this.model.get("id"),{trigger:!0}),this.toggleLoading(!1)},serialize:function(){var e=c.getItem("savedForm")||{};return u.isSubPage("phone")&&(e.lastUrl="settings/phone"),this.removeSavedForm(),e.links=this.linksModel.toJSON(),e}});return d}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/phone/confirm"},idAttribute:"confirm",defaults:{isDefault:!1},parse:function(e){return e.data}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(13),n(53),n(68)],r=function(e,t,n,i,r,o){"use strict";var s=i.extend({initialize:function(e){this.options=e},afterRoute:function(){var e=r.get(this.options.id),t="/settings";e&&e.destroy({headers:{id:this.options.id},wait:!0}),o.isSubPage("phone")&&(t="settings/phone"),n.history.navigate(t)}});return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(26),n(46),n(54),n(111),n(53),n(68),n(69),n(71),n(58),n(72),n(73)],r=function(e,t,n,i,r,o,s,a,l,c){"use strict";var u=i.extend({el:"#overpanel",template:"settings/phone/edit",events:{"click .confirmCode":"confirmPhone","submit form[name=editPhone]":"savePhone"},initialize:function(e){this.options=e},initWidgets:function(){this.$(".textInput").lap().textField(),this.$(".ppCheckbox").checkbox(),this.$(".selectDropdown").nativeDropdown(),this.formView=new o({el:"form[name=editPhone]"})},afterRoute:function(){this.model=l.findWhere({id:this.options.id}),c.isSubPage("phone")&&this.model.set({lastUrl:"settings/phone"}),r.setContent(this)},afterRender:function(){this.initWidgets()},savePhone:function(e){e.preventDefault();var t=n.Syphon.serialize(this),i=this;this.listenToOnce(this.model,"error",this.submitError),this.listenToOnce(this.model,"sync",this.onPhoneUpdate),this.listenToOnce(this.model,"invalid",function(e,t){i.handleError(),i.formView.showError(t)}),this.$("#primary:checked").length>0&&l.setPrimaryFalse(this.model.get("type")),this.model.set(t),this.model.set({error:this.$(".phoneNumber .help-error").text(),phoneNumber:this.$el.find("input[name=phoneNumber]").val().replace(/\D/g,"")}),this.toggleLoading(!0),this.model.save()},handleError:function(){this.removeSavedForm(),this.toggleLoading(!1)},submitError:function(t,n,i){i||(i=e(".phoneNumber .help-error").text()),this.toggleLoading(!1),this.formView.showError(i)},onPhoneUpdate:function(){l.reset(l.toJSON()),this.toggleLoading(!1),r.hideOverpanel(),n.trigger("phone:update",this.model.toJSON())},confirmPhone:function(e){e.preventDefault(),this.confirmPhoneModel=new a,this.listenToOnce(this.confirmPhoneModel,"error",this.submitError),this.listenToOnce(this.confirmPhoneModel,"sync",this.confirmationCodeSent),this.confirmPhoneModel.set("id",this.options.id),this.confirmPhoneModel.save()},confirmationCodeSent:function(){n.history.navigate("settings/phone/validate/"+this.model.get("id"),{trigger:!0})},serialize:function(){var e=this.model.toJSON();return e.phoneId=e.id,delete e.id,e.phoneType=e.type,delete e.type,e}});return u}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(14),n(6),n(61),n(26),n(46),n(53),n(111),n(68),n(69),n(71),n(58),n(72)],r=function(e,t,n,i,r,o,s,a,l,c){"use strict";var u=r.extend({el:"#overpanel",template:"settings/phone/validateCode",events:{"click .validateCode":"validateCode","click .resendCode":"resendCode"},initialize:function(e){this.options=e},initWidgets:function(){this.$(".textInput").lap().textField(),this.$(".ppCheckbox").checkbox(),this.$(".selectDropdown").nativeDropdown(),this.formView=new s({el:"form[name=validateCode]"})},afterRoute:function(){this.model=a.findWhere({id:this.options.id}),c.isSubPage("phone")&&this.model.set({lastUrl:"settings/phone"}),o.setContent(this)},afterRender:function(){this.initWidgets()},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},validateCode:function(e){this.toggleLoading(!1),e.preventDefault(),this.validateCodeModel=a.findWhere({id:this.options.id}),this.validateCodeModel.url=i.history.options.root+"settings/phone/validateCode",this.listenToOnce(this.validateCodeModel,"error",this.submitError),this.listenToOnce(this.validateCodeModel,"sync",this.validateCodeSuccess),this.validateCodeModel.set("id",this.options.id),this.validateCodeModel.set("code",this.$("input[name=verificationCode]").val()),this.validateCodeModel.save(),this.toggleLoading(!0)},validateCodeSuccess:function(){n.viewRenderer.render("settings/phone/confirmSuccess",{formattedPhoneNumber:this.model.get("formattedPhoneNumber")}).done(e.proxy(function(t){this.toggleLoading(!1),e("#overpanel").html(t)},this)),this.validateCodeModel.set("confirmed",!0),a.reset(a.toJSON())},resendCode:function(){this.confirmPhoneModel=new l,this.listenToOnce(this.confirmPhoneModel,"error",this.submitError),this.listenToOnce(this.confirmPhoneModel,"sync",this.confirmationCodeSent),this.confirmPhoneModel.set("id",this.model.get("id")),this.confirmPhoneModel.save(),this.toggleLoading(!0)},confirmationCodeSent:function(){this.toggleLoading(!1),i.history.navigate("settings/phone/validate/"+this.model.get("id"),{trigger:!0})},serialize:function(){return this.model.toJSON()}});return u}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(26),n(46)],r=function(e,t,n,i,r,o){"use strict";var s=i.extend({el:"#overpanel",template:"settings/photo/edit",initialize:function(){},initWidgets:function(){this.formView=new o({el:"form[name=editPhone]"})},afterRoute:function(){r.setContent(this)},afterRender:function(){this.initWidgets()}});return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(14),n(61),n(117),n(84),n(46)],r=function(e,t,n,i,r,o,s){"use strict";var a=i.extend({el:".stage .security",initialize:function(){this.initModels(),this.deviceView=new o,this.formView=new s({el:this.$(".container")})},initModels:function(){r.set(this.$(".travelProfile").data("collection")),this.listenTo(r,"sync",this.renderTravelPlans),this.listenTo(r,"destroy",this.renderTravelPlans),this.listenTo(r,"error",this.renderError)},renderTravelPlans:function(){var i=e(".travelProfile").data("collection"),o=i&&i.longDateFormat,s=t.extend(r.toJSON(),{longDateFormat:o});n.viewRenderer.render("settings/inc/travelPlan",{travelProfile:s}).done(function(t){e(".travelProfile").replaceWith(t)})},renderError:function(e,t,n){this.formView.showError(n)}});return a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";var t=e.Model.extend({url:function(){return e.history.options.root+"settings/travelPlan"},defaults:{isDefault:!1,id:1},parse:function(e){return e.data}});return new t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(26),n(46),n(119),n(69),n(71),n(58)],r=function(e,t,n,i,r,o,s){"use strict";var a=i.extend({el:"#overpanel",template:"settings/securityQuestions/edit",events:{"submit form[name=saveQuestions]":"saveQuestions"},initialize:function(e){this.options=e},initWidgets:function(){this.$(".textInput").lap().textField(),this.$(".selectDropdown").nativeDropdown(),this.formView=new o({el:"form[name=saveQuestions]"})},afterRoute:function(){this.securityQuestionsModel=new s,r.setContent(this)},afterRender:function(){this.initWidgets()},submitError:function(e,t,n){return"string"==typeof t?this.submitError(this,e,t):(this.toggleLoading(!1),void this.formView.showError(n))},saveQuestions:function(e){e.preventDefault(),this.listenToOnce(this.securityQuestionsModel,"error",this.submitError),this.listenToOnce(this.securityQuestionsModel,"sync",this.onQuestionsUpdate),this.listenToOnce(this.securityQuestionsModel,"invalid",this.submitError),this.toggleLoading(!0),this.securityQuestionsModel.set({error:this.$(".help-error").first().text(),question1:this.$("select[name=question1] :selected").text(),question2:this.$("select[name=question2] :selected").text(),answer1:this.$("input[name=answer1]").val(),answer2:this.$("input[name=answer2]").val()}),this.securityQuestionsModel.save()},onQuestionsUpdate:function(){this.toggleLoading(!1),r.hideOverpanel()}});return a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/securityQuestions"},defaults:{isDefault:!1},parse:function(e){return e.data},validate:function(e){return e.question1===e.question2?this.get("error"):!1}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(14),n(8),n(6),n(61),n(26),n(46),n(121),n(69),n(71),n(73)],r=function(e,t,n,i,r,o,s,a){"use strict";var l=r.extend({el:"#overpanel",template:"settings/taxid/edit",events:{"submit form[name=saveTaxId]":"submitTaxId"},initialize:e.noop,initWidgets:function(){this.$(".textInput").lap().textField(),this.formView=new s({el:"form[name=saveTaxId]"})},afterRoute:function(){this.model=new a,o.setContent(this)},afterRender:function(){this.initWidgets()},submitTaxId:function(e){e.preventDefault(),this.listenTo(this.model,"error",this.submitError),this.listenTo(this.model,"sync",this.onTaxIdUpdate),this.options=this.options||{};var t=i.Syphon.serialize(this);this.model.set(t),this.model.set("type",this.options.type),this.model.save(),this.toggleLoading(!0)},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},onTaxIdUpdate:function(n){n.set("shortValue",n.getVisibleTaxId()),t.viewRenderer.render("settings/inc/taxIdItem",n.attributes).done(e.proxy(function(t){e("li.taxId.type-"+n.get("type")).replaceWith(t),this.toggleLoading(!1),o.hideOverpanel(),this.model.clear()},this))},serialize:function(){var e=this.options.type,t=this.model.get("format");return{maskLength1:t[e]&&t[e].maskLength1||"",maskLength2:t[e]&&t[e].maskLength2||"",maskLength3:t[e]&&t[e].maskLength3||"",type:e}}});return l}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/taxId"},defaults:{isDefault:!1,first:"",second:"",third:"",format:{SSN:{maskLength1:3,maskLength2:2,maskLength3:4},SIN:{maskLength1:3,maskLength2:3,maskLength3:3}}},parse:function(e){return e.data},getVisibleTaxId:function(){
var e=this.get("first")+this.get("second")+this.get("third"),t=e.slice(-4)||"";return"SSN"===this.get("type")?t=t.substring(2,4):"SIN"===this.get("type")&&(t=t.substring(1,4)),t}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(26),n(117),n(46),n(60),n(69),n(71),n(58),n(73)],r=function(e,t,n,i,r,o,s,a){"use strict";var l=i.extend({el:"#overpanel",template:"settings/travelPlan/add",events:{"submit form[name=addTravelPlan]":"addTravelPlan"},initialize:e.noop,initWidgets:function(){this.$(".textInput").textField(),this.$(".selectDropdown").nativeDropdown(),this.formView=new s({el:"form[name=addTravelPlan]"})},afterRoute:function(){r.setContent(this)},afterRender:function(){this.initWidgets()},initModels:function(){this.model=o,this.model.clear(),this.listenToOnce(this.model,"error",this.submitError),this.listenToOnce(this.model,"sync",this.onTravelPlanUpdate)},addTravelPlan:function(e){e.preventDefault();var t=n.Syphon.serialize(this);a.setItem("savedForm",t),this.initModels(),this.model.set(t),this.model.save(),this.toggleLoading(!0)},submitError:function(e,t,n){this.removeSavedForm(),this.toggleLoading(!1),this.formView.showError(n)},onTravelPlanUpdate:function(){this.removeSavedForm(),this.toggleLoading(!1),r.hideOverpanel()},serialize:function(){var t=a.getItem("savedForm");return this.removeSavedForm(),t&&(t.longDateFormat=e(".travelProfile").data("collection").longDateFormat),t||e(".travelProfile").data("collection")}});return l}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(13),n(117)],r=function(e,t,n,i,r){"use strict";var o=i.extend({initialize:function(e){this.options=e},afterRoute:function(){r.clear(),r.set("id",1),r.destroy({wait:!0}),n.history.navigate("/settings/security")}});return o}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(8),n(6),n(61),n(26),n(46),n(117),n(69),n(71),n(58),n(73)],r=function(e,t,n,i,r,o,s){"use strict";var a=i.extend({el:"#overpanel",template:"settings/travelPlan/edit",events:{"submit form[name=editTravelPlan]":"editTravelPlan"},initialize:function(e){this.options=e},initWidgets:function(){this.$(".textInput").lap().textField(),this.$(".selectDropdown").nativeDropdown(),this.formView=new o({el:"form[name=editTravelPlan]"})},afterRoute:function(){s?r.setContent(this):n.history.navigate("/settings/security")},afterRender:function(){this.initWidgets()},editTravelPlan:function(e){e.preventDefault();var t=n.Syphon.serialize(this);this.listenToOnce(s,"error",this.submitError),this.listenToOnce(s,"sync",this.onTravelPlanUpdate),s.set(t),s.set("id",1),s.save(),this.toggleLoading(!0)},submitError:function(e,t,n){this.toggleLoading(!1),this.formView.showError(n)},onTravelPlanUpdate:function(){s.set(s.toJSON()),this.toggleLoading(!1),r.hideOverpanel()},serialize:function(){return s.toJSON()}});return a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(1),n(61),n(6),n(126),n(127),n(72)],r=function(e,t,n,i,r){"use strict";var o=t.extend({el:".stage .wallet",events:{"change .cards input:not(#choose):not(:disabled)":"savePreference","change #choose:not(disabled)":"unsetCreditPreference","change .cards input:not(:disabled)":"toggleBalance"},initialize:function(){this.$(".ppCheckbox").checkbox({radio:!0})},savePreference:function(t){var n=e(t.currentTarget);this.model=new i,this.model.set({id:n.data("fiid"),type:n.data("type"),fullFlexibility:r.isTreatment("fmx_wallet_full_flex_treatment"),instore:"instore"===n.parents(".cards").data("channel")}),this.model.save()},unsetCreditPreference:function(){this.model=new i,this.model.url=n.history.options.root+"settings/removePaypalCreditPreference",this.model.save({},{method:"post"})},onItemClick:function(t){var i;"A"!==t.target.tagName&&0===e(t.target).parent("a").length&&(i=e(t.currentTarget).find(".fill-click").attr("href"),i&&"#"!==i&&(i=i.replace(n.history.options.root,""),n.history.navigate(i,{trigger:!0,replace:!1})))},toggleBalance:function(t){var n=e(t.currentTarget);n.parents(".instruments").find(".balance").toggleClass("hide","paypalCredit"===n.attr("name"))}});return o}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(6)],r=function(e){"use strict";return e.Model.extend({url:function(){return e.history.options.root+"settings/walletPreference"},defaults:{isDefault:!1},parse:function(e){return e.data}})}.apply(t,i),!(void 0!==r&&(e.exports=r))}]));
//# sourceMappingURL=2.2.js.map